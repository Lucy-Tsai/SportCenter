<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>會員註冊</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;600;700&display=swap" >
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="style.css">
    </head>
<body id="bg">
    <header id="main">
        Sport Center
    </header>
    <p id="pageTitle">會員註冊</p>
    <form id="form_register" action="{{ url_for('register') }}" method="post">
        <label>姓名：</label>
        <input type="name" name="name" required><br>
        <label>用戶名：</label>
        <input type="text" name="username" id="username" required> <button type="button" onclick="checkUsername()">檢查用戶名</button><br>
        <label>身分證字號：(登入帳號)</label>
        <input type="numberid" name="numberid" required><br>
        <label>密碼：</label>
        <input type="password" name="password" required><br>
        <label>性別：</label>
        <select name="gender" required>
            <option value="男">男</option>
            <option value="女">女</option>
        </select><br>
        <label>電子信箱：</label>
        <input type="email" name="email" required><br>
        <label>生日：</label>
        <input type="date" name="birthday" required onchange="calculateAge()"><br>
        <label>年齡：</label>
        <input type="number" name="age" id="age" readonly><br>
        <label>連絡電話：</label>
        <input type="tel" name="phone" required><br>
        <input type="submit" value="註冊">
    </form>
    <footer>
        <a href="index.html" ><span class="backToIndex">按我回首頁</span></a>
        <h4>地址:台北市中正區忠孝東路一段123號  電話:(02)2345-1343 營業時間:6:00-22:00</h4>
    </footer>
    <script>
        function calculateAge() {
            const today = new Date();
            const birthday = new Date(document.getElementsByName('birthday')[0].value);
            const age = today.getFullYear() - birthday.getFullYear();
            document.getElementById('age').value = age;
        }

        function checkUsername() {
            const username = document.getElementById('username').value;

            // 使用 JavaScript 或 Ajax 來向後端發送檢查用戶名的請求
            // 這裡可以使用 fetch 或 XMLHttpRequest 等方式
            const formData = new FormData();
            formData.append('username', username);

            fetch('/check_username', {
                method: 'POST',
                body: formData,
            })
            .then(response => response.text())
            .then(data => {
                // 顯示彈出視窗
                alert(data);
            })
            .catch(error => {
                // 請自行處理錯誤
                console.error('Error:', error);
            });
        }

    </script>
</body>
</html>